{% extends "base.html" %}


{% block scripts %}
{{super()}}

<script type="text/javascript">
  citoIncomingSparql = `
SELECT ?intention ?intentionLabel (COUNT(DISTINCT ?citingArticle) AS ?count) WHERE {
  VALUES ?JOURNAL { wd:{{q}} }
  ?citingArticle p:P2860 ?citationStatement .
  ?citationStatement pq:P3712 ?intention ;
                     ps:P2860 ?citedArticle .
  ?citedArticle wdt:P1433 ?JOURNAL .
  ?intention wdt:P31 wd:Q96471816 ;
             wdt:P2888 ?cito .
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
} GROUP BY ?cito ?intention ?intentionLabel
  ORDER BY DESC(?count)`
  
 citoOutgoingSparql = `
SELECT ?intention ?intentionLabel (COUNT(DISTINCT ?citingArticle) AS ?count) WHERE {
  VALUES ?JOURNAL { wd:{{q}} }
  ?citingArticle p:P2860 ?citationStatement ;
                 wdt:P1433 ?JOURNAL .
  ?citationStatement pq:P3712 ?intention ;
                     ps:P2860 ?citedArticle .
  ?intention wdt:P31 wd:Q96471816 ;
             wdt:P2888 ?cito .
  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
} GROUP BY ?cito ?intention ?intentionLabel
  ORDER BY DESC(?count)`

  $(document).ready(function() {
      sparqlToDataTable(citoIncomingSparql, "#cito-incoming", {
         linkPrefixes: {
             intention: "../../cito/",
         }
      });
      sparqlToDataTable(citoOutgoingSparql, "#cito-outgoing", {
         linkPrefixes: {
             intention: "../../cito/",
         }
      });
  });
</script>

{% endblock %}

{% block page_content %}
<h1 id="h1">Venue</h1>

<h2>Incoming citations</h2>

<div class="embed-responsive embed-responsive-16by9">
    <iframe class="embed-responsive-item" src="https://query.wikidata.org/embed.html#%23defaultView%3ABubbleChart%0ASELECT%20%3Fintention%20%3FintentionLabel%20(COUNT(DISTINCT%20%3FcitingArticle)%20AS%20%3Fcount)%20WHERE%20%7B%0A%20%20%3FcitingArticle%20p%3AP2860%20%3FcitationStatement%20.%0A%20%20%3FcitationStatement%20pq%3AP3712%20%3Fintention%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ps%3AP2860%20%3FcitedArticle%20.%0A%20%20%3FcitedArticle%20wdt%3AP1433%20wd%3A{{q}}%20.%0A%20%20%3Fintention%20wdt%3AP31%20wd%3AQ96471816%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20wdt%3AP2888%20%3Fcito%20.%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D%20GROUP%20BY%20%3Fcito%20%3Fintention%20%3FintentionLabel%0A%20%20ORDER%20BY%20DESC(%3Fcount)"></iframe>
</div>

<table class="table table-hover" id="cito-incoming"></table>

<h2>Outgoing citations</h2>

<div class="embed-responsive embed-responsive-16by9">
    <iframe class="embed-responsive-item" src="https://query.wikidata.org/embed.html#%23defaultView%3ABubbleChart%0ASELECT%20%3Fcito%20%3FintentionLabel%20(COUNT(DISTINCT%20%3FcitingArticle)%20AS%20%3Fcount)%20WHERE%20%7B%0A%20%20%3FcitingArticle%20p%3AP2860%20%3FcitationStatement%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20wdt%3AP1433%20wd%3A{{q}}%20.%0A%20%20%3FcitationStatement%20pq%3AP3712%20%3Fintention%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ps%3AP2860%20%3FcitedArticle%20.%0A%20%20%3Fintention%20wdt%3AP31%20wd%3AQ96471816%20%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20wdt%3AP2888%20%3Fcito%20.%0A%20%20SERVICE%20wikibase%3Alabel%20%7B%20bd%3AserviceParam%20wikibase%3Alanguage%20%22%5BAUTO_LANGUAGE%5D%2Cen%22.%20%7D%0A%7D%20GROUP%20BY%20%3Fcito%20%3Fintention%20%3FintentionLabel%0A%20%20ORDER%20BY%20DESC(%3Fcount)"></iframe>
</div>

<table class="table table-hover" id="cito-outgoing"></table>

{% endblock %}
    
